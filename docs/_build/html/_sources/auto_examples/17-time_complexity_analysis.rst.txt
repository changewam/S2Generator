
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples\17-time_complexity_analysis.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_17-time_complexity_analysis.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_17-time_complexity_analysis.py:


Time Complexity Analysis for The :math:`S^2` Data Generation
==================================================================

In this section, we provide a detailed analysis and proof of the time complexity of the :math:`S^2` data generation mechanism. Our theoretical analysis shows that the time complexity of data generation is proportional to the length :math:`L` of the time series. We will then verify the specific time required for data generation using multiple sets of different lengths to validate our theoretical analysis.

We define the specific symbol explanation and its  as follows. Then we use the divide-and-conquer approach to analyze the complexity of our :math:`S^2` data generation mechanism.

+-----------+----------------------------------------------------------------------+
| symbol    | explanation                                                          |
+===========+======================================================================+
| :math:`L` | The length of time series                                            |
+-----------+----------------------------------------------------------------------+
| :math:`M` | Number of input channels                                             |
+-----------+----------------------------------------------------------------------+
| :math:`N` | Number of output channels                                            |
+-----------+----------------------------------------------------------------------+
| :math:`k` | Total number of mixed distributions used                             |
+-----------+----------------------------------------------------------------------+
| :math:`p` | Autoregressive model order in ARMA model                             |
+-----------+----------------------------------------------------------------------+
| :math:`q` | Moving average model order in ARMA model                             |
+-----------+----------------------------------------------------------------------+
| :math:`P` | Probability of choosing a sampling method                            |
+-----------+----------------------------------------------------------------------+
| :math:`b` | Number of binary operators used to construct symbolic expressions    |
+-----------+----------------------------------------------------------------------+
| :math:`u` | The number of unary operators used to construct symbolic expressions |
+-----------+----------------------------------------------------------------------+
 
1. **Symbolic Expression Generation**: We construct symbolic expressions using a tree structure as a medium. When we have :math:`b` binary operators, we further insert :math:`(b + 1)` leaf nodes (the process from (a) to (b) in **Figure 3** in our paper). Therefore, after inserting :math:`u` unary operators (**Figure 3** (c)), the total number of nodes in the tree is :math:`n = 2b + u + 1`. Because there are many ways to construct a tree, we consider the time complexity of constructing a balanced tree. Therefore, for :math:`N` symbols constructed, the specific complexity of this process is:

.. math::
   O(N\times n\mathrm{log}n)


2. **Sampling series generation**: When we want to generate a sampling time series with :math:`M` channels, each channel has a probability of :math`:`P` to be sampled using a mixture distribution and a probability of :math:`(1-P)` to be sampled using an ARMA model. When the sampling length of the series is :math:`L`, the complexity of generating :math:`k` mixture distribution and ARMA (:math:`p`, :math:`q`) series is :math:`O(kL)` and :math:`O(L(p+q))`. Therefore, the time complexity of this process can be quantified as:

.. math::
   O \left ( ML \times [Pk + (1-P)(p+q)] \right )


3. **Sampling through symbolic expressions and series**: We simplify the specific operational details of this process and only consider the time complexity of operations with variables. For a series of length L, we have :math:`N` symbolic expressions to be sampled, and each symbol has an average of :math:`\frac{M+1}{2}` variables (Each symbolic expression may contain any number of variables from 1 to M, so here we take :math:`\frac{M+1}{2}=\frac{(1+2+\cdots+M)}{M}` as the average probability). Then the process can be quantified as:

.. math::
   O(N \cdot \frac{M+1}{2}\cdot L)

To sum up, since other variables that affect the :math:`S^2` sampling process are usually small, it can be intuitively understood that the time complexity of the entire sampling process is proportional to the length :math:`L`.

.. GENERATED FROM PYTHON SOURCE LINES 53-59

.. code-block:: Python

    import time
    import numpy as np
    from tqdm import tqdm

    from S2Generator import Generator, SymbolParams








.. GENERATED FROM PYTHON SOURCE LINES 60-61

In the following experiment, we generate time series data with a length interval of 16 and calculate the specific time required.

.. GENERATED FROM PYTHON SOURCE LINES 63-94

.. code-block:: Python



    # Create the generator instance
    generator = Generator(symbol_params=SymbolParams(max_trials=16))

    # The number of generated data
    try_count = 1

    length_array = np.arange(16, 528, 16)

    time_array = np.zeros_like(length_array)

    # Variables with different time lengths
    for index, n_points in enumerate(length_array):
        start = time.time()
        for seed in tqdm(range(try_count)):
            # Create the random number generator
            rng = np.random.RandomState(seed)

            # Start generating data
            generator.run(
                rng=rng, input_dimension=1, output_dimension=1, n_inputs_points=n_points
            )

        # Record the time required for this length
        end = time.time()
        time_array[index] = end - start

        # Print status information
        print(f"Generate Length: {n_points}, Time: {end - start}!")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 65.38it/s]
    Generate Length: 16, Time: 0.016313552856445312!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 37.31it/s]
    Generate Length: 32, Time: 0.027231693267822266!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 66.52it/s]
    Generate Length: 48, Time: 0.015410184860229492!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 35.91it/s]
    Generate Length: 64, Time: 0.028357267379760742!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 63.80it/s]
    Generate Length: 80, Time: 0.016054630279541016!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 59.88it/s]
    Generate Length: 96, Time: 0.017113208770751953!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 60.84it/s]
    Generate Length: 112, Time: 0.016773223876953125!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 58.28it/s]
    Generate Length: 128, Time: 0.017534971237182617!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 41.82it/s]
    Generate Length: 144, Time: 0.02440929412841797!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 50.72it/s]
    Generate Length: 160, Time: 0.020142078399658203!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 58.26it/s]
    Generate Length: 176, Time: 0.01755690574645996!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 62.52it/s]
    Generate Length: 192, Time: 0.016371488571166992!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 32.70it/s]
    Generate Length: 208, Time: 0.031186342239379883!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 63.18it/s]
    Generate Length: 224, Time: 0.016446828842163086!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 53.38it/s]
    Generate Length: 240, Time: 0.019199132919311523!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 27.21it/s]
    Generate Length: 256, Time: 0.03713178634643555!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 31.06it/s]
    Generate Length: 272, Time: 0.03267264366149902!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 32.42it/s]
    Generate Length: 288, Time: 0.031239748001098633!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 25.47it/s]
    Generate Length: 304, Time: 0.03979921340942383!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 27.34it/s]
    Generate Length: 320, Time: 0.036981821060180664!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 63.85it/s]
    Generate Length: 336, Time: 0.016071319580078125!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 32.77it/s]
    Generate Length: 352, Time: 0.031009435653686523!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 31.57it/s]
    Generate Length: 368, Time: 0.03207206726074219!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 42.23it/s]
    Generate Length: 384, Time: 0.024152755737304688!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 52.57it/s]
    Generate Length: 400, Time: 0.019585132598876953!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 28.59it/s]
    Generate Length: 416, Time: 0.035448312759399414!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 15.35it/s]
    Generate Length: 432, Time: 0.06560277938842773!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 48.34it/s]
    Generate Length: 448, Time: 0.021214008331298828!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 28.81it/s]
    Generate Length: 464, Time: 0.03511500358581543!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 49.62it/s]
    Generate Length: 480, Time: 0.02064371109008789!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 12.58it/s]
    Generate Length: 496, Time: 0.08007192611694336!
      0%|                                                                                                                                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]    100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 27.23it/s]
    Generate Length: 512, Time: 0.03721165657043457!




.. GENERATED FROM PYTHON SOURCE LINES 95-97

From the above experimental results, we can generally see that the time required for data generation is generally proportional to the length of the time series.
However, consider that in many cases, when we construct the symbolic expression :math:`f(\cdot)` and input the stimulus time series :math:`X` into the system to obtain the corresponding :math:`Y=f(X)`, the values ​​of the stimulus time series may fall outside the domain of the symbolic expression :math:`f(\cdot)`, resulting in sampling failure. This phenomenon will affect the sampling time.

.. GENERATED FROM PYTHON SOURCE LINES 99-117

.. code-block:: Python



    from matplotlib import pyplot as plt

    fig, ax = plt.subplots(figsize=(8, 3), dpi=180)

    ax.plot(
        length_array,
        time_array,
        color="royalblue",
        marker="o",
        markersize=5,
        markerfacecolor="white",
    )
    ax.grid("--", color="gray", alpha=0.4)
    ax.set_xlabel("The length of the generated time series", fontsize=12)
    ax.set_ylabel("The Time Complexity Analysis", fontsize=12)

    # %%


.. image-sg:: /auto_examples/images/sphx_glr_17-time_complexity_analysis_001.png
   :alt: 17 time complexity analysis
   :srcset: /auto_examples/images/sphx_glr_17-time_complexity_analysis_001.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    Text(75.75, 0.5, 'The Time Complexity Analysis')




.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 0.938 seconds)


.. _sphx_glr_download_auto_examples_17-time_complexity_analysis.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 17-time_complexity_analysis.ipynb <17-time_complexity_analysis.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 17-time_complexity_analysis.py <17-time_complexity_analysis.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: 17-time_complexity_analysis.zip <17-time_complexity_analysis.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
